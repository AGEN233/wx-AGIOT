<!-- index.wxml -->
<view class="ios-container">
  
  <!-- é¡¶éƒ¨å¯¼èˆªåŒº (æ¨¡æ‹Ÿ iOS Large Title) -->
  <view class="nav-header">
    <view class="nav-left">
      <text class="date-text">æˆ‘çš„å®¶</text> <!-- å‰¯æ ‡é¢˜/æ—¥æœŸä½ -->
      <text class="large-title">è®¾å¤‡</text>
    </view>
    
    <!-- å³ä¸Šè§’æ·»åŠ æŒ‰é’® (åœ†å½¢æ¯›ç»ç’ƒ) -->
    <view class="add-btn-wrapper" bindtap="onAddDevice">
      <text class="iconfont-plus">+</text>
    </view>
  </view>

  <!-- è®¾å¤‡åˆ—è¡¨åŒºåŸŸ -->
  <scroll-view scroll-y class="content-scroll" enable-back-to-top>
    <view class="grid-layout">
      
      <block wx:for="{{deviceList}}" wx:key="id">
        <!-- 
           bindtap: ç‚¹å‡»è¿›å…¥è¯¦æƒ…
           bindlongpress: é•¿æŒ‰åˆ é™¤
           hover-class: æ¨¡æ‹ŸæŒ‰ä¸‹æ—¶çš„ç¼©æ”¾æ•ˆæœ 
        -->
        <view 
          class="ios-card {{item.status ? 'active' : ''}}" 
          hover-class="card-hover"
          hover-stay-time="100"
          bindtap="onDeviceTap" 
          bindlongpress="onDeviceLongPress"
          data-index="{{index}}"
          data-id="{{item.id}}"
        >
          <!-- å¡ç‰‡å†…å®¹å®¹å™¨ -->
          <view class="card-content">
            <!-- å›¾æ ‡/é¢œè‰²åŒº -->
            <view class="icon-circle" style="background: {{item.status ? '#fff' : 'rgba(255,255,255,0.1)'}}">
              <!-- æ ¹æ®çŠ¶æ€æ”¹å˜å›¾æ ‡é¢œè‰² -->
              <view class="status-dot" style="background: {{item.status ? item.color : 'transparent'}}"></view>
              <!-- å¯ä»¥åœ¨è¿™é‡Œæ”¾ image å›¾æ ‡ -->
              <text style="color: {{item.status ? item.color : '#8E8E93'}};">ğŸ’¡</text>
            </view>

            <!-- æ–‡å­—ä¿¡æ¯ -->
            <view class="text-group">
              <text class="card-name">{{item.name}}</text>
              <text class="card-state">{{item.status ? 'å·²å¼€å¯' : 'å…³é—­'}}</text>
            </view>
          </view>
          
          <!-- å•ç‹¬çš„å¼€å…³è§¦æ§åŒº (å³ä¸Šè§’) -->
          <!-- å®é™…ä¸Š iOS HomeKit ç‚¹å‡»æ•´ä¸ªå¡ç‰‡æ˜¯å¼€å…³ï¼Œé•¿æŒ‰æ˜¯è¯¦æƒ…ã€‚
               è¿™é‡Œä¸ºäº†å…¼é¡¾ä½ çš„éœ€æ±‚ï¼Œæˆ‘ä»¬åšä¸ªæŠ˜ä¸­ï¼šæ•´ä¸ªå¡ç‰‡è¿›è¯¦æƒ…ï¼Œç‹¬ç«‹å¼€å…³æŒ‰é’® -->
          <view class="switch-area" catchtap="onSwitchTap" data-index="{{index}}">
             <view class="ios-switch {{item.status ? 'on' : ''}}"></view>
          </view>
        </view>
      </block>

      <!-- å ä½ç¬¦ä¿æŒå¸ƒå±€æ•´é½ -->
      <view class="ios-card placeholder" wx:if="{{deviceList.length % 2 !== 0}}"></view>

    </view>
    <!-- åº•éƒ¨ç•™ç™½ -->
    <view style="height: 120rpx;"></view>
  </scroll-view>
</view>